@model dotnet_ex.Models.Test

<div class="exam-screen-wrapper">
    <div class="exam-screen">
        <div class="exam-header">
            <div class="exam-title">@Model.Title</div>
            <div class="timer">⏱ @Model.DurationMinutes dk</div>
        </div>

        <form asp-action="SubmitAnswers" method="post">
            <input type="hidden" name="TestId" value="@Model.Id" />

            <ol class="question-list">
                @for (int i = 0; i < Model.Questions?.Count; i++)
                {
                    var q = Model.Questions.ElementAt(i);
                    <li class="question-box">
                        <div class="question-number">Soru @(i + 1) / @(Model.Questions.Count)</div>
                        <div class="question-text">@q.Text</div>

                        <div class="options">
                            <!-- Burada hidden input ile QuestionId gönderiyoruz -->
                            <input type="hidden" name="Answers[@i].QuestionId" value="@q.Id" />

                            <label class="option">
                                <input type="radio" name="Answers[@i].SelectedOption" value="A" required />
                                A) @q.OptionA
                            </label>
                            <label class="option">
                                <input type="radio" name="Answers[@i].SelectedOption" value="B" />
                                B) @q.OptionB
                            </label>
                            <label class="option">
                                <input type="radio" name="Answers[@i].SelectedOption" value="C" />
                                C) @q.OptionC
                            </label>
                            <label class="option">
                                <input type="radio" name="Answers[@i].SelectedOption" value="D" />
                                D) @q.OptionD
                            </label>
                        </div>
                    </li>
                }
            </ol>

            <div class="exam-footer">
                <button type="submit" class="btn btn-primary">Sınavı Bitir</button>
            </div>
        </form>
    </div>
</div>
